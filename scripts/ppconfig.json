{"name":"feaceccefaafffdbde","url":"https://fjpz154g3uwc.jp.larksuite.com/next/messenger","showName":"Bit365Lark","appid":"com.bit365lark.app","icon":"","iconPath":"/Users/mozhenzhong/Library/Application Support/com.pakeplus.pacbao/qqa7j5kiaq.png","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"1.0.1","preview":"desktop","platform":["2-1","2-2"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"const { WebviewWindow } = window.__TAURI__.webviewWindow\n\n// 获取主窗口的 User-Agent\nconst mainUserAgent = navigator.userAgent\n\n// URL 路径到 title 的映射表\nconst urlTitleMap = {\n    '/mail/': '邮箱',\n    '/calendar/': '日历',\n    '/space/home/': '云文档',\n    '/docx/': '文档',\n    '/wiki/': '知识库',\n}\n\n// 根据 URL 获取对应的 title\nfunction getTitleFromUrl(url) {\n    try {\n        const urlObj = new URL(url)\n        const pathname = urlObj.pathname\n        \n        // 遍历映射表，查找匹配的路径\n        for (const [path, title] of Object.entries(urlTitleMap)) {\n            if (pathname.includes(path)) {\n                return title\n            }\n        }\n        \n        // 如果没有匹配到，返回默认值\n        return '新窗口'\n    } catch (e) {\n        // URL 解析失败，返回默认值\n        return '新窗口'\n    }\n}\n\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    \n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        \n        const url = origin.href\n        const title = getTitleFromUrl(url) || origin.textContent?.trim() || origin.title || '新窗口'\n        \n        // 使用 Tauri API 在新窗口打开，并设置相同的 User-Agent\n        const label = `window-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n        const webview = new WebviewWindow(label, {\n            url: url,\n            userAgent: mainUserAgent,\n            width: 1200,\n            height: 800,\n            focus: true,\n            title: title,\n            center: true,\n            resizable: true,\n            visible: true,\n        })\n\n        webview.once('tauri://created', function () {\n            console.log('new webview created')\n        })\n\n        webview.once('tauri://error', function (e) {\n            console.log('new webview error', e)\n        })\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    \n    const title = getTitleFromUrl(url)\n    \n    // 使用 Tauri API 在新窗口打开，并设置相同的 User-Agent\n    const label = `window-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n    const webview = new WebviewWindow(label, {\n        url: url,\n        userAgent: mainUserAgent,\n        width: 1200,\n        height: 800,\n        focus: true,\n        title: title,\n        center: true,\n        resizable: true,\n        visible: true,\n    })\n\n    webview.once('tauri://created', function () {\n        console.log('new webview created')\n    })\n\n    webview.once('tauri://error', function (e) {\n        console.log('new webview error', e)\n    })\n    \n    return null\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })","isHtml":false,"htmlPath":"","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.5","iosRepo":"PakePlus-iOS-v2.1.5","androidRepo":"PakePlus-Android-v2.1.5","more":{"windows":{"label":"","title":"Bit365Lark","url":"https://fjpz154g3uwc.jp.larksuite.com/next/messenger","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":1280,"height":780,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"fullScreen":false,"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"feaceccefaafffdbde","showName":"Bit365Lark","version":"1.0.1","webUrl":"https://fjpz154g3uwc.jp.larksuite.com/next/messenger","id":"com.bit365lark.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"android":{"name":"feaceccefaafffdbde","showName":"Bit365Lark","version":"1.0.1","webUrl":"https://fjpz154g3uwc.jp.larksuite.com/next/messenger","id":"com.bit365lark.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false,"safeArea":"all"},"desktop":{"name":"feaceccefaafffdbde","showName":"Bit365Lark","version":"1.0.1","id":"com.bit365lark.app.desktop","desc":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","webUrl":"https://fjpz154g3uwc.jp.larksuite.com/next/messenger","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}